# TOSCA Input file - ABL Properties 
# --------------------------------- 

# Reference velocity and height for the velocity controller. 
uRef (8.0 0.0)
hRef 90.0

# Reference potential temperature. 
tRef 300.0

# Equivalent Roughness length. 
hRough 0.003

# Height of the center of the inversion layer. 
hInv 750.0

# Width of the inversion layer. 
dInv 100.0

# Potential temperature jump across the inversion layer. 
gInv 5.0

# Potential temperature gradient on top of the inversion layer.
gTop 0.003

# Potential temperature gradient below the inversion layer.
gABL 0.0

# Von Karman Constant.
vkConst 0.4

# Rampanelli and Zardi temperature model parameter.
smearT 0.5

# Activate Coriolis force  
coriolisActive 1

# Activate velocity controller 
controllerActive 1

# Activate temperature controller 
controllerActiveT 0

# Activate precursor temperature controller 
controllerActivePrecursorT 0

# Activate precursor velocity controller
controllerActivePrecursor 1

# Mismatch between successor and precursor controllers
precursorControllerTypeMismatch 0

controllerProperties
{
    # Velocity controller parameters
    controllerAction read
    controllerType timeSeries

    # Velocity controller gain factor 
    relaxPI 0.7

    # Velocity controller proportional over integral contribution ratio
    alphaPI 0.9

    # Velocity controller time filter
    timeWindowPI 3600

    # Velocity controller max height of influence 
    controllerMaxHeight 100000.0
    
    # Start time for the given momentum source average (only controller type 'average')
    controllerAvgStartTime 9000.0
}

# Rayleigh damping layer (zDampingLayer = 1 in control.dat)
zDampingProperties
{
    zDampingStart   1000
    zDampingEnd     4675.48
    zDampingAlpha   0.01
    zDampingAlsoXY  0 
}

# Fringe region (xDampingLayer = 1 in control.dat)
xDampingProperties
{
    xDampingStart   0
    xDampingEnd     200
    xDampingDelta   50
    xDampingAlpha   0.7
    xDampingAlphaControlType alphaFixed
    
    uBarSelectionType 3
    inletFunctionType 4
    n1Inflow 50 
    n2Inflow 50 
    n1Periods 1
    n2Periods 2
    n1Merge   0 
    interpolation spline
    sourceType uniform
    cellWidth1 20
    cellWidth2 20
    n2Shift    0
    shiftSpeed 1.5
}

# Lateral fringe region (yDampingLayer = 1 in control.dat)
yDampingProperties
{
    yDampingStart   1400
    yDampingEnd     1800
    yDampingDelta   100
    yDampingAlpha   0.7
    yDampingNumPeriods 5
}

# x-advection damping (advectionDampingX = 1 in control.dat)
advectionDampingXProperties
{
 advDampingStart       200
 advDampingEnd         600
 advDampingDeltaStart  100
 advDampingDeltaEnd    100
}

# y-advection damping (advectionDampingY = 1 in control.dat)
advectionDampingYProperties
{
    advDampingStart       1600
    advDampingEnd         2000
    advDampingDeltaStart  100
    advDampingDeltaEnd    100
}

# Coriolis parameter: 7.272205217e-5 * sin(latitude)
fCoriolis 5.156303966e-5

# perturbations to trigger turbulence 
perturbations   0
