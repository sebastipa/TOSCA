<img src="docs/images/tosca.png" width="400">

**Welcome to the official repository of TOSCA, the Toolbox fOr Stratified Convective Atmospheres.**

TOSCA is an incompressible finite-volume large-eddy simulation code formulated in curvilinear coordinates 
with Boussinesq approximation to account for buoyancy. It features a moving immersed boundary method and several actuator 
models to include bodies and wind turbines within the simulation domain. It has been successfully used to simulate atmospheric 
boundary layer and wind farm flows, including terrain and wind farm induced atmospheric gravity waves, cluster wakes, as well as 
wind farm control problems. TOSCA is currently developed at the [Computational Fluid Dynamics Laboratory of the University of British Columbia, Okanagan Campus](https://cfdlab.ok.ubc.ca/wind-farm-blockage-and-wake-effects/). 

We kindly ask you to *please* fill up [this](https://docs.google.com/forms/d/e/1FAIpQLSfUGtlHbCPfSI4-CO4bC9D4YsjcHis3Tu7UPTJeYqiB7BgCXA/viewform?usp=header) 
survey, which allows us to keep track of new TOSCA users around the world.

A large effort has been recently put in creating a comprehensive **User Guide**, which hosted right [here](https://sebastipa.github.io/TOSCA/) on GitHub. 
Although some chapters are still under construction, you can  already find instructions on how to install the code, a complete list of all input files and variables, together with their explanation,
as well as a step by step guide of some of the tutorials that are available on the repository under the `tests/` directory. We refer to these set of 
read-the-docs pages online as the main TOSCA user guide. 

An additional, temporary, user guide (which will soon become outdated) with a *TOSCA Getting Started* can be found inside `docs/` (*TOSCA_UserGuide.pdf*). 
For programmers, the code follows the *Doxygen* commenting style, so that a programmer's documentation is automatically generated by Doxygen. 
This can be found both inside `docs/` (*ReferenceManual.pdf*), or opened as a web documentation upon downloading the TOSCA repository and opening 
`docs/html/index.html`

## Reporting Bugs

For bugs, questions and to request modification to the TOSCA code, please open an issue GitHub. You can 
also contribute to the TOSCA code as explained [here](https://sebastipa.github.io/TOSCA/tosca_installation.html#contribute-to-the-tosca-project).
For different matters, please contact sebastiano.stipa@vki.ac.be or aajay100@mail.ubc.ca. 

## Publications

The following is a list of publication where TOSCA has been used. For referencing the TOSCA code please use the first publication on the list. 

 - [TOSCA – an open-source, finite-volume, large-eddy simulation (LES) environment for wind farm flows](https://wes.copernicus.org/articles/9/297/2024/). 
 - [The actuator farm model for large eddy simulation (LES) of wind-farm-induced atmospheric gravity waves and farm–farm interaction](https://wes.copernicus.org/articles/9/2301/2024/wes-9-2301-2024.html).
 - [The multi-scale coupled model: a new framework capturing wind farm–atmosphere interaction and global blockage effects](https://wes.copernicus.org/articles/9/1123/2024/wes-9-1123-2024.html).
 - [A large-eddy simulation (LES) model for wind-farm-induced atmospheric gravity wave effects inside conventionally neutral boundary layers](https://wes.copernicus.org/articles/9/1647/2024/).
 - [A shear stress parametrization for arbitrary wind farms in conventionally neutral boundary layers](https://www.cambridge.org/core/journals/journal-of-fluid-mechanics/article/shear-stress-parametrization-for-arbitrary-wind-farms-in-conventionally-neutral-boundary-layers/C0A9582A21C2C9907685D8C63B0565A6).
 - [Recommendations on setup in simulating atmospheric gravity waves under conventionally neutral boundary layer conditions](https://iopscience.iop.org/article/10.1088/1742-6596/2767/9/092042).
 - [Active Cluster Wake Mixing](https://iopscience.iop.org/article/10.1088/1742-6596/2767/9/092052).

## Recent Highlights/Additions

 - Direct/Indirect profile assimilation techniques to drive LES with observations/mesoscale models
 - New scale-dependent LES model
 - New stability dependent wall model for IBM
 - IBM also for concurrent precursor (to model terrain features)
 - Lateral fringe region.

## Executables

 - `tosca`    : transient solver for stratified incompressible flows. Temperature stratification is accounted via Boussinesq approximation.
 - `tosca2PV` : post processor for ParaView visualization. Writes data in XMF/HDF format.

## Future Implementations:

 - Actuator model coupling with OpenFAST
 - Two-way overset interpolation
 - Multiphase capabilities 

Credits & Copyright: Sebastiano Stipa - Arjun Ajay - Mohammad Hadi - The University of British Columbia
