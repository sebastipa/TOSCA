

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IBM &mdash; TOSCA dev documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=23c79765" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=3ce10a4d"></script>
      <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Spatial Mesh" href="../spatial_mesh.html" />
    <link rel="prev" title="turbines" href="turbines.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            TOSCA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tosca_getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tosca_installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../tosca_user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../input_files.html">Input Files</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="control.html"><cite>control.dat</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="boundary.html"><cite>boundary</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="ablProperties.html"><cite>ABLProperties.dat</cite></a></li>
<li class="toctree-l3"><a class="reference internal" href="turbines.html"><cite>turbines</cite></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><cite>IBM</cite></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ibmproperties-dat">IBMProperties.dat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#object-n-dictionary">Object&lt;N&gt; Dictionary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../spatial_mesh.html">Spatial Mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overset.html">2-Way Nesting (Overset Mesh)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acquisition.html">Data Acquisition System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../execution.html">Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tosca_examples.html">Example Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tosca_applications.html">TOSCA Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tosca_theory_guide.html">Theory Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tosca_versions.html">Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TOSCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../tosca_user_guide.html">User Guide</a></li>
          <li class="breadcrumb-item"><a href="../input_files.html">Input Files</a></li>
      <li class="breadcrumb-item active"><cite>IBM</cite></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/01_user_guide/input_files/ibm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ibm">
<span id="ibm-section"></span><h1><cite>IBM</cite><a class="headerlink" href="#ibm" title="Link to this heading"></a></h1>
<p>This section describes how the immersed boundary method (IBM) can be activated in TOSCA. The code supports both static or dynamic
IBM, where the latter means that the body can move without limitations inside the computational domain. The IBM has been fully parallelized
and it features fast algorithms to perform both topology tests (inside-outside) or the search that finds, at every iteration, the
closest fluid mesh cell for each IBM surface triangle. TOSCA’s IBM is referred to as a sharp-interface method, where boundary conditions
are not applied by means of momentum source terms, but rather by directly recunstructing the boundary condition at the IBM fluid cells.
These cells are selected through the following algorithm. First, all cells whose center lies inside the IBM body are marked as IBM solid cells.
These cells are blanked when solving the governing equations. Then, wherever an IBM solid cell is adjacent to a fluid cell, this fluid cell is
transformed into an IBM fluid cell, where BCs are reconstructed, so that IBM solid cells are always enclosed in a layer of IBM fluid cells.
This distinction, which can be seen as a cell coloring algorithm, is saved in the <em>nv</em> field, which marks each cell based on its IBM
coloring. For instance, <em>nv</em> is 0, 1 and 2 for fluid cells, IBM fluid cells and IBM solid cells, respectively.</p>
<p>Both boundary conditions and wall models can be applied to the IBM fluid cells. BCs are reconstructed by first creating a fictitious
ghost point on the surface normal (pointing outward) through the center of the fluid cell. The field of interest is then interpolated
at this point using trilinear or triangular interpolation from the surrounding cells. This is then used to apply the boundary condition at the fluid cell, also
considering the velocity of the IBM body. For wall models, theoretical laws are used, while for slip and no-slip BCs a linear interpolation
is employed. Optionally, one can also use two fictitious ghost points, which lead to a quadratic interpolation instead.</p>
<p>The body surface mesh is read from an UCD file, which is a standard format for surface meshes (this format can be generated e.g. by PointWise).
Notably, to read the UCD file in ParaView, the extension must be changed to <em>.inp</em>. Finally, in TOSCA only the name of the file should be specified,
thereby dropping the extension. Below is an example of a UCD file for a cuboid, where each face is split in two triangles:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp"># UCD Geometry file crated by custom python script</span>
<span class="cp">#</span>
<span class="cp">#</span>
<span class="mi">8</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span>
<span class="mi">1</span><span class="w"> </span><span class="mf">-6.83333e+02</span><span class="w"> </span><span class="mf">-4.33333e+02</span><span class="w"> </span><span class="mf">0.00000e+00</span>
<span class="mi">2</span><span class="w">  </span><span class="mf">6.83333e+02</span><span class="w"> </span><span class="mf">-4.33333e+02</span><span class="w"> </span><span class="mf">0.00000e+00</span>
<span class="mi">3</span><span class="w">  </span><span class="mf">6.83333e+02</span><span class="w">  </span><span class="mf">1.13333e+03</span><span class="w"> </span><span class="mf">0.00000e+00</span>
<span class="mi">4</span><span class="w"> </span><span class="mf">-6.83333e+02</span><span class="w">  </span><span class="mf">1.13333e+03</span><span class="w"> </span><span class="mf">0.00000e+00</span>
<span class="mi">5</span><span class="w"> </span><span class="mf">-6.83333e+02</span><span class="w"> </span><span class="mf">-4.33333e+02</span><span class="w"> </span><span class="mf">1.20000e+02</span>
<span class="mi">6</span><span class="w">  </span><span class="mf">6.83333e+02</span><span class="w"> </span><span class="mf">-4.33333e+02</span><span class="w"> </span><span class="mf">1.20000e+02</span>
<span class="mi">7</span><span class="w">  </span><span class="mf">6.83333e+02</span><span class="w">  </span><span class="mf">1.13333e+03</span><span class="w"> </span><span class="mf">1.20000e+02</span>
<span class="mi">8</span><span class="w"> </span><span class="mf">-6.83333e+02</span><span class="w">  </span><span class="mf">1.13333e+03</span><span class="w"> </span><span class="mf">1.20000e+02</span>
<span class="mi">1</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<span class="mi">2</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span>
<span class="mi">3</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span>
<span class="mi">4</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span>
<span class="mi">5</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">6</span>
<span class="mi">6</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">7</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">7</span>
<span class="mi">8</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">6</span>
<span class="mi">9</span><span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">8</span>
<span class="mi">10</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">7</span>
<span class="mi">11</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">5</span>
<span class="mi">12</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">tri</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">8</span>
</pre></div>
</div>
<p>Notably, there are 8 vertices and 12 triangles in the example above.</p>
<p>In order to activate the IBM in TOSCA, the <code class="docutils literal notranslate"><span class="pre">-ibm</span></code> flag has to be set to 1 in the <cite>control.dat</cite> file. TOSCA is prompted to read additional
inputs inside the <code class="docutils literal notranslate"><span class="pre">IBM</span></code> directory. These are the <cite>IBMProperties.dat</cite> file and at least one IBM body in the above format, whose name is
specified in the <cite>IBMProperties.dat</cite> file.</p>
<section id="ibmproperties-dat">
<h2>IBMProperties.dat<a class="headerlink" href="#ibmproperties-dat" title="Link to this heading"></a></h2>
<p>The following tables summarize all available entries for each of the <cite>IBMProperties.dat</cite> file.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>entry</strong></p></td>
<td><p><strong>entry type</strong></p></td>
<td><p><strong>description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">NumberofBodies</span></code></p></td>
<td><p>integer</p></td>
<td><p>Number of bodies.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">debug</span></code></p></td>
<td><p>bool</p></td>
<td><p>If set to 1, the code will print additional information about the IBM.
This is useful for debugging purposes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dynamic</span></code></p></td>
<td><p>bool</p></td>
<td><p>0 for static IBM, 1 for dynamic IBM.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">checkNormal</span></code></p></td>
<td><p>bool</p></td>
<td><p>if set to 1 checks that all normals are pointing outward and flips them if
necessary. This option is always recommended.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">averageNormal</span></code></p></td>
<td><p>bool</p></td>
<td><p>averages the normal across more IBM triangles, recommended for irregular
bodies or bodies that are under-resolved by the triangular mesh.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">computeForce</span></code></p></td>
<td><p>bool</p></td>
<td><p>computes forces on the IBM body. Moments are only calculated if the IBM is
dynamic. This will be corrected in the future.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">writeSTL</span></code></p></td>
<td><p>bool</p></td>
<td><p>writies the IBM body in STL format based on the <cite>writeSettings</cite>.
Useful with dynamic IBM, to visualize the body motion.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">wallShear</span></code></p></td>
<td><p>bool</p></td>
<td><p>directly computes the wall shear and applies within the momentum equation.
Recommended for terrains. Requires <cite>interpolationDistance</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interpolationDistance</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Distance from the body surface where the ghost point is placed. This
parameter should be set according to the mean mesh size at the wall and it
it is uniform to avoid spikes in the stress produced by variable IBM fluid
cell to surface distance.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">abl</span></code></p></td>
<td><p>bool</p></td>
<td><p>if set to 1 allows to set <cite>groundLevel</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">groundLevel</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Allows to set a user-defined ground level. This used at differet levels in
the code when evaluating heigh-dipendend BCs and models.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">writeSettings</span></code></p></td>
<td><p>dictionary</p></td>
<td><p>Required when <cite>computeForce</cite> is set to 1. Contains entries for the IBM force
writing. It is defined as follows:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">writeSettings</span>
<span class="p">{</span>
<span class="w">   </span><span class="n">timeStart</span><span class="w">    </span><span class="n">scalar</span><span class="w"> </span><span class="c1">// start time for writing</span>
<span class="w">   </span><span class="n">intervalType</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="c1">// timeStep or adjustableTime</span>
<span class="w">   </span><span class="n">timeInterval</span><span class="w"> </span><span class="n">scalar</span><span class="w"> </span><span class="c1">// number of iters or seconds</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">InterpolationMethod</span></code></p></td>
<td><p>string</p></td>
<td><p><cite>CURVIB</cite> (preferred, requires <cite>CURVIBInterpolationType</cite>) or <cite>MSL</cite>
(Moving Least Squares). The first method is preferred while the last is
only recommended for simple geometries and for no-slip BCs only.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CURVIBInterpolationType</span></code></p></td>
<td><p>string</p></td>
<td><p><cite>CurvibTrilinear</cite> (recommended) or <cite>CurvibTriangular</cite>. The first
interpolates the velocity at the ghost node using tri-linera interpolation
from the 8 surrounding fluid cells. The second uses a triangular
interpolation from 3 surrounding fluid cells. The first method is
recommended and it is the most tested, although it is a bit more expensive.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interpolationOrder</span></code></p></td>
<td><p>string</p></td>
<td><p>Only required for <cite>CurvibTrilinear</cite>, can be <cite>linear</cite> (more stable) or
<cite>quadratic</cite> (less stable). The latter is recommended for smooth terrain or
smooth static bodies. It referst to how many fictitious ghost points are
projected from the surface mesh into the fluid domain.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">object&lt;N&gt;</span></code></p></td>
<td><p>dictionary</p></td>
<td><p>specifies the object-specific properties. There are as meny dictionaries as
the number of bodies. The name of the dictionary is <cite>object</cite> followed by the
body index. The body index is an integer starting from 0.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="object-n-dictionary">
<h2>Object&lt;N&gt; Dictionary<a class="headerlink" href="#object-n-dictionary" title="Link to this heading"></a></h2>
<p>The object-specific properties are defined in the <code class="docutils literal notranslate"><span class="pre">object&lt;N&gt;</span></code> dictionary. The following table summarizes the mandatory
entries that are required for each object when the <cite>bodyMotion</cite> flag is set to <em>static</em>. For non-static body motion,
additional entries are required, which are summarized below in table <a class="reference internal" href="#non-static-ibm-subsubsubsection"><span class="std std-ref">Non-Static IBM</span></a>.</p>
<section id="static-ibm">
<h3>Static IBM<a class="headerlink" href="#static-ibm" title="Link to this heading"></a></h3>
<table class="docutils align-center">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>entry</strong></p></td>
<td><p><strong>entry type</strong></p></td>
<td><p><strong>description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bodyName</span></code></p></td>
<td><p>string</p></td>
<td><p>Name of the body. This is the name of the file without the extension.
The file must be in the <cite>IBM</cite> directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bodyType</span></code></p></td>
<td><p>string</p></td>
<td><p>This is the type of body, can be <cite>closedBody</cite> or <cite>surfaceBody</cite>. In the
first case, the body is a closed watertight body, in the second case, the
is one or more open surfaces, and additional entries are required.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">numSurfaces</span></code></p></td>
<td><p>integer</p></td>
<td><p>Number of surfaces that make up the body. Only required for <cite>surfaceBody</cite>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fileType</span></code></p></td>
<td><p>string or
vector of string</p></td>
<td><p>Can be <em>ucd</em>, <em>grd</em>, <em>ascii</em>, <em>inp</em> or <em>ucd2</em> for <cite>closedBody</cite>. Can be
<em>ucd</em>, <em>grd</em>, <em>inp</em> or <em>ucd2</em> for <cite>surfaceBody</cite>. For <cite>closedBody</cite>, this is
a single string, while for <cite>surfaceBody</cite> this is a vector of strings, .e.g
(<em>ucd</em> <em>grd</em> <em>inp</em>). The size of the vector must be equal to <cite>numSurfaces</cite>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">surfaceNames</span></code></p></td>
<td><p>vector of string</p></td>
<td><p>Names of the surface files that make up a body. This is a vecotor whose
elements are the names of the files. The size of the vector must be equal to
<cite>numSurfaces</cite>. The files must be in the <cite>IBM</cite> directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">elementSet</span></code></p></td>
<td><p>string</p></td>
<td><p>Used for both <cite>closedBody</cite> and <cite>surfaceBody</cite> when the <code class="docutils literal notranslate"><span class="pre">fileType</span></code> is set to
<em>inp</em> to select an element set from the file. Currently is unique for all
surfaces when there are multiple surfaces. For example, given a finite-
element model mesh, with strings and longerons, it can be used to only
select the outer surface of the body for the fluid calculation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">baseLocation</span></code></p></td>
<td><p>vector</p></td>
<td><p>Translation vector that allows to translate each point coordinate by this
amount in the x, y and z direction. This is useful to move the body directly
within TOSCA if this is defined with a different coordinate system.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bodyMotion</span></code></p></td>
<td><p>string</p></td>
<td><p>Type of body motion, can be <cite>static</cite>, <cite>rotation</cite>, <cite>sinusoidal</cite> or
<cite>pitchingOscillation</cite>. Moving cases required additional entries (see table
below).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">searchCellRatio</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Factor that multiplies the average cell size, indicating how far away from a
given surface triangle to go, when performing the search for the closest
fluid cell. A value of 3 is recommended for most cases.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">velocityBCSetType</span></code></p></td>
<td><p>string</p></td>
<td><p>mode used to set the velocity boundary condition.</p>
<ul class="simple">
<li><p><cite>matchUiLeft</cite>: match iLeft patch boundary condition</p></li>
<li><p><cite>matchUiRight</cite>: match iRight patch boundary condition</p></li>
<li><p><cite>matchUjLeft</cite>: match jLeft patch boundary condition</p></li>
<li><p><cite>matchUjRight</cite>: match jRight patch boundary condition</p></li>
<li><p><cite>setHere</cite>: set in the <em>IBMProperties.dat</em> file, requires
additional entries.</p></li>
</ul>
<p>Match-type boundary conditions are useful for terrain simulations, where the
IBM body may merge with the bottom patch, in order to ensure that the same
boundary condition is applied.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">temperatureBCSetType</span></code></p></td>
<td><p>string</p></td>
<td><p>mode used to set the temperature boundary condition. Requires <cite>-potentialT</cite>
to be set to 1 in the <cite>control.dat</cite> file.</p>
<ul class="simple">
<li><p><cite>matchTiLeft</cite>: match iLeft patch boundary condition</p></li>
<li><p><cite>matchTiRight</cite>: match iRight patch boundary condition</p></li>
<li><p><cite>matchTjLeft</cite>: match jLeft patch boundary condition</p></li>
<li><p><cite>matchTjRight</cite>: match jRight patch boundary condition</p></li>
<li><p><cite>setHere</cite>: set in the <em>IBMProperties.dat</em> file, requires
additional entries.</p></li>
</ul>
<p>Match-type boundary conditions are useful for terrain simulations, where the
IBM body may merge with the bottom patch, in order to ensure that the same
boundary condition is applied.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">velocityBC</span></code></p></td>
<td><p>string</p></td>
<td><p>Only required with <cite>velocityBCSetType</cite> set to <em>setHere</em>.
Name of the IBM velocity boundary condition. Available entries are
<cite>noSlip</cite>, <cite>slip</cite> and <cite>velocityWallFunction</cite>. The latter requires additional
entries, depending on <cite>wallFunctionTypeU</cite>, detailed in the next table.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">wallFunctionTypeU</span></code></p></td>
<td><p>integer</p></td>
<td><p>Requires <cite>velocityBC</cite> to be set to <cite>velocityWallFunction</cite>.
Used to select the type of wall function for the velocity
(-1, -3, -4 or -5).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">temperatureBC</span></code></p></td>
<td><p>string</p></td>
<td><p>Only required with <cite>temperatureBCSetType</cite> set to <em>setHere</em>.
Name of the IBM velocity boundary condition. Available entries are
<cite>zeroGradient</cite>, <cite>fixedValue</cite> (requires <cite>fixedValueT</cite> entry) and
<cite>thetaWallFunction</cite>. The latter requires additional entries, depending on
<cite>wallFunctionTypeT</cite>, detailed in the next table.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">wallFunctionTypeT</span></code></p></td>
<td><p>integer</p></td>
<td><p>Requires <cite>temperatureBC</cite> to be set to <cite>thetaWallFunction</cite>.
Used to select the type of wall function for the potential temperature
(-2, -3 or -4).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fixedValueT</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Fixed value for the temperature BC. Only required with
<cite>temperatureBCSetType</cite> set to <em>setHere</em> and <cite>temperatureBC</cite> set
to <cite>fixedValue</cite>.</p></td>
</tr>
</tbody>
</table>
<p>The following table summarizes the velocity wall functions selectable from the <em>IBMProperties.dat</em> file and their entries.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>entry</strong></p></td>
<td><p><strong>entry type</strong></p></td>
<td><p><strong>description</strong></p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>wallFunctionTypeU     -1</em>: Cabot wall model</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">roughness</span></code></p></td>
<td><p>scalar</p></td>
<td><p>equivalent roughness height in meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><em>wallFunctionTypeU     -3</em>: Shumann wall model</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uStarEval</span></code></p></td>
<td><p>string</p></td>
<td><p><cite>averaged</cite> for laterally-homogeneous flows, <cite>localized</cite> otherwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">thetaRef</span></code></p></td>
<td><p>scalar</p></td>
<td><p>reference potential temperature in Kelvin.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">roughness</span></code></p></td>
<td><p>scalar</p></td>
<td><p>equivalent roughness height in meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gammaM</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><em>wallFunctionTypeU     -4</em>: Power law wall model</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">roughness</span></code></p></td>
<td><p>scalar</p></td>
<td><p>equivalent roughness height in meters.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>wallFunctionTypeU     -5</em>: Log law wall model</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">roughness</span></code></p></td>
<td><p>scalar</p></td>
<td><p>eqivalent roughness height in meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
</tbody>
</table>
<p>The following table summarizes the temperature wall functions selectable from the <em>IBMProperties.dat</em> file and their entries.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>entry</strong></p></td>
<td><p><strong>entry type</strong></p></td>
<td><p><strong>description</strong></p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>wallFunctionTypeT     -2</em>: Shumann wall model - wall heat flux prescribed</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">qWall</span></code></p></td>
<td><p>scalar</p></td>
<td><p>wall heat flux in J/m2.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>wallFunctionTypeT     -3</em>: Shumann wall model - constant heating rate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">uStarEval</span></code></p></td>
<td><p>string</p></td>
<td><p><cite>averaged</cite> for laterally-homogeneous flows, <cite>localized</cite> otherwise.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">thetaRef</span></code></p></td>
<td><p>scalar</p></td>
<td><p>reference potential temperature in Kelvin.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kRough</span></code></p></td>
<td><p>scalar</p></td>
<td><p>equivalent roughness height in meters.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gammaM</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gammaH</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">alphaH</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">heatingRate</span></code></p></td>
<td><p>scalar</p></td>
<td><p>heating rate in K/s.</p></td>
</tr>
<tr class="row-odd"><td colspan="3"><p><em>wallFunctionTypeT     -4</em>: Shumann wall model - variable heating rate</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">uStarEval</span></code></p></td>
<td><p>string</p></td>
<td><p><cite>averaged</cite> for laterally-homogeneous flows, <cite>localized</cite> otherwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kappa</span></code></p></td>
<td><p>scalar</p></td>
<td><p>von Karman constant.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">thetaRef</span></code></p></td>
<td><p>scalar</p></td>
<td><p>reference potential temperature in Kelvin.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">kRough</span></code></p></td>
<td><p>scalar</p></td>
<td><p>equivalent roughness height in meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gammaM</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gammaH</span></code></p></td>
<td><p>scalar</p></td>
<td><p>Shumann model constant.</p></td>
</tr>
</tbody>
</table>
<p>Theta wall function type -4 requires look up tables of time (s), surface temperature (K), and Obhukhov length (m),
stored in <code class="docutils literal notranslate"><span class="pre">inflowDatabase/mesoscaleData/time</span></code>, <code class="docutils literal notranslate"><span class="pre">inflowDatabase/mesoscaleData/surfTemp</span></code> and <code class="docutils literal notranslate"><span class="pre">inflowDatabase/mesoscaleData/L</span></code>, respectively.
All vectors should have the same size. Notably, these wall functions are the same as the ones described in <a class="reference internal" href="boundary.html#boundary-subsection"><span class="std std-ref">boundary</span></a>.</p>
</section>
<section id="non-static-ibm">
<span id="non-static-ibm-subsubsubsection"></span><h3>Non-Static IBM<a class="headerlink" href="#non-static-ibm" title="Link to this heading"></a></h3>
<p>When the <cite>bodyMotion</cite> flag is not set to <em>static</em> inside a body’s specific dictionary, it means that the IBM can move within the domain. In this case, the additional entries
reported in the following table are required. The first two entries are mandatory for all motions, while the remaining entries are specific to the type of motion.</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 20.0%" />
<col style="width: 50.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>entry</strong></p></td>
<td><p><strong>entry type</strong></p></td>
<td><p><strong>description</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">procBoundCenter</span></code></p></td>
<td><p>vector</p></td>
<td><p>center of the box enclosing the body and its motion throughout the entire
simulation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">procBoundSize</span></code></p></td>
<td><p>vector</p></td>
<td><p>size of the box enclosing the body and its motion throughout the entire
simulation.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>rotation</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">angularSpeed</span></code></p></td>
<td><p>scalar</p></td>
<td><p>angular speed in rpm.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">angularAcceleration</span></code></p></td>
<td><p>scalar</p></td>
<td><p>angular acceleration in rpm per second.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rotationAxis</span></code></p></td>
<td><p>vector</p></td>
<td><p>rotation axis (normalized by TOSCA).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rotationCenter</span></code></p></td>
<td><p>vector</p></td>
<td><p>base of the rotation axis.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">maxTipRadius</span></code></p></td>
<td><p>scalar</p></td>
<td><p>maximum radius of the body, used to compute an equivalent tip speed far
from the center of rotation, thus limiting the time step so that the
fastest triangular elements of the body only crosse one cell per time step.</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>sinusoidal</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">amplitude</span></code></p></td>
<td><p>scalar</p></td>
<td><p>motion amplitude in meters.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">frequency</span></code></p></td>
<td><p>scalar</p></td>
<td><p>frequency in Hz.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">motionDirection</span></code></p></td>
<td><p>vector</p></td>
<td><p>direction of the motion (normalized by TOSCA).</p></td>
</tr>
<tr class="row-even"><td colspan="3"><p><em>pitchingOscillation</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">angularAmplitude</span></code></p></td>
<td><p>scalar</p></td>
<td><p>angular amplitude in degrees.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">frequency</span></code></p></td>
<td><p>scalar</p></td>
<td><p>frequency in Hz.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">initialAngle</span></code></p></td>
<td><p>scalar</p></td>
<td><p>initial angle in degrees.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pitchingAxis</span></code></p></td>
<td><p>vector</p></td>
<td><p>pitching axis (normalized by TOSCA).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pitchingCenter</span></code></p></td>
<td><p>vector</p></td>
<td><p>base of the pitching axis.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="turbines.html" class="btn btn-neutral float-left" title="turbines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../spatial_mesh.html" class="btn btn-neutral float-right" title="Spatial Mesh" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sebastiano Stipa, Arjun Ajay, Joshua Brinkerhoff.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>