

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; TOSCA dev documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=23c79765" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=3ce10a4d"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User Guide" href="tosca_user_guide.html" />
    <link rel="prev" title="Welcome the official documentation of TOSCA" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            TOSCA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#contribute-to-the-tosca-project">Contribute to the TOSCA Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openfast-coupling">OpenFAST Coupling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#paraview-catalyst2-os-rendering">Paraview-Catalyst2 OS-Rendering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tosca_user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca_examples.html">Example Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca_applications.html">TOSCA Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca_theory_guide.html">Theory Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tosca_versions.html">Versions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TOSCA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tosca_installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="installation-section"></span><h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<p>This is a step-by-step guide to install TOSCA on your system.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please follow these instructions carefully. Usually, installing TOSCA is very easy if all the following steps are completed in the order in which they are described. If you downloaded the
latest TOSCA updates after having already compiled the code, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code> before compiling the code at step 14.</p>
</div>
<p>In order to be installed, TOSCA requires a working C/C++ compiler, PETSc (version 3.14.x, 3.15.x), Open MPI (version 4.0.x, 4.1.x), HDF5 and
HYPRE (needed by PETSs in order to build some of the matrix solvers we use). TOSCA has been tested with the above version combinations,
it could work with other combinations or versions but it has not been tested (especially older versions). The present guide also shows how to get
these dependencies in the easiest way. First, the following versions are recommended:</p>
<ul class="simple">
<li><p>gcc      : 9.2.0  (<a class="reference external" href="https://gcc.gnu.org/">https://gcc.gnu.org/</a>).</p></li>
<li><p>PETSc    : 3.15.5 (<a class="reference external" href="https://ftp.mcs.anl.gov/pub/petsc/">https://ftp.mcs.anl.gov/pub/petsc/</a> - soon compilation against the latest version will be made available).</p></li>
<li><p>Open MPI : 4.1.2  (<a class="reference external" href="https://www.open-mpi.org/software/ompi/v4.1/">https://www.open-mpi.org/software/ompi/v4.1/</a>).</p></li>
<li><p>HYPRE    : 2.20.0 (<a class="reference external" href="https://github.com/hypre-space/hypre/tree/master">https://github.com/hypre-space/hypre/tree/master</a> - check version in /src/CMakeLists.txt).</p></li>
<li><p>HDF5     : 1.12.1 (<a class="reference external" href="https://www.hdfgroup.org/downloads/hdf5/">https://www.hdfgroup.org/downloads/hdf5/</a>).</p></li>
</ul>
<p>Prior to install TOSCA, we suggest to create a folder named <code class="docutils literal notranslate"><span class="pre">software</span></code> inside <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>, where the PETSc, TOSCA and potentially other libraries directories will be located.
In order to compile TOSCA on your system, please follow these steps:</p>
<ol class="arabic">
<li><p>Check your compiler version with <code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">--version</span></code></p></li>
<li><p>Download PETSc into <code class="docutils literal notranslate"><span class="pre">$HOME/software/</span></code></p></li>
<li><p>Download Open MPI: you can download the binaries or compile from source (the latter is recommended if using <code class="docutils literal notranslate"><span class="pre">environment-modules</span></code> e.g. on an HPC architecture).
If you have only one version of Open MPI installed on your system in the <code class="docutils literal notranslate"><span class="pre">/usr</span></code> directory (installed using sudo for example), you can omit the
<code class="docutils literal notranslate"><span class="pre">--with-mpi-dir='your--path--to--mpicc'</span></code> at point 6: Open MPI will be found by the library locator.</p></li>
<li><p>Download HYPRE into <code class="docutils literal notranslate"><span class="pre">$HOME/software/</span></code>. This can be omitted (suggested) if you use the <code class="docutils literal notranslate"><span class="pre">--download-hypre</span></code> option in the PETSc configure step.</p></li>
<li><p>Download HDF5 into <code class="docutils literal notranslate"><span class="pre">$HOME/software/</span></code>. This can be omitted (suggested) if you use the <code class="docutils literal notranslate"><span class="pre">--download-hdf5</span></code> option in the PETSc configure step.</p></li>
<li><p>Configure PETSc. We suggest the following configure options, which will automatically compile HYPRE and HDF5.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure<span class="w"> </span>--with-fc<span class="o">=</span><span class="m">0</span><span class="w"> </span>--download-f2cblaslapack<span class="w"> </span>--download-hypre<span class="w"> </span>--download-hdf5<span class="w"> </span>--with-64-bit-indices<span class="o">=</span><span class="m">1</span><span class="w"> </span>--with-debugging<span class="o">=</span><span class="m">0</span>
</pre></div>
</div>
<p>Note that other options are available. For example, if one wants to specify paths to already installed OpenMPI libraries,
the options <code class="docutils literal notranslate"><span class="pre">--with-mpi-dir='your--path--to--mpicc'</span></code> can be used. We strongly suggest to use the <code class="docutils literal notranslate"><span class="pre">--download-hypre</span></code> and <code class="docutils literal notranslate"><span class="pre">--download-hdf5</span></code> options,
as they will download and compile the libraries automatically, making hte installation process easier.</p>
</li>
<li><p>Make PETSc (PETSc will suggest a command after the configure, we advice to use that):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>all
</pre></div>
</div>
</li>
<li><p>Check the PETSc installation (PETSc will suggest a command after compilation, we advice to use that):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>check
</pre></div>
</div>
</li>
<li><p>Save an environment variable that will tell TOSCA where PETSc is installed in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>. For HPC installations
it might be a better practice to use the <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> instead.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PETSC_DIR=</span><span class="nv">$HOME</span><span class="s2">/your--path--to--petsc--dir&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>or, for HPCs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PETSC_DIR=</span><span class="nv">$HOME</span><span class="s2">/your--path--to--petsc--dir&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bash_profile
</pre></div>
</div>
</li>
<li><p>Save an environment variable that will tell TOSCA which PETSc architecture is required in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>. For HPC installations
it might be a better practice to use the <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> instead.</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PETSC_ARCH=arch-linux-c-opt&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>or, for HPCs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export PETSC_ARCH=arch-linux-c-opt&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bash_profile
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the folder within <code class="docutils literal notranslate"><span class="pre">$PETSC_DIR</span></code> with a name beginning with <code class="docutils literal notranslate"><span class="pre">arch-</span></code>. In a typical installation, it will be <code class="docutils literal notranslate"><span class="pre">arch-linux-c-opt</span></code>.</p>
</div>
<ol class="arabic" start="11">
<li><p>Save an environment variable that will tell TOSCA where HDF5 libraries/include files will be located in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>. For HPC installations
it might be a better practice to use the <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> instead. This variable will be used in the TOSCA <code class="docutils literal notranslate"><span class="pre">makefile</span></code> to compile <code class="docutils literal notranslate"><span class="pre">tosca2PV</span></code>.
If you have installed HDF5 using the <code class="docutils literal notranslate"><span class="pre">--download-hdf5</span></code> option in the PETSc configure step, the HDF5 <cite>lib</cite> and <cite>include</cite> directories will be located in
the <code class="docutils literal notranslate"><span class="pre">$PETSC_DIR/$PETSC_ARCH/</span></code> folder, together with HYPRE and PETSc ones.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export HDF5_DIR=</span><span class="nv">$PETSC_DIR</span><span class="s2">/</span><span class="nv">$PETSC_ARCH</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>or, for HPCs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export HDF5_DIR=</span><span class="nv">$PETSC_DIR</span><span class="s2">/</span><span class="nv">$PETSC_ARCH</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bash_profile
</pre></div>
</div>
</li>
<li><p>Add the PETSc shared libraries to your library path environment variable in your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>. For HPC installations
it might be a better practice to use the <code class="docutils literal notranslate"><span class="pre">.bash_profile</span></code> instead.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export LD_LIBRARY_PATH=</span><span class="nv">$LD_LIBRARY_PATH</span><span class="s2">:</span><span class="nv">$PETSC_DIR</span><span class="s2">/</span><span class="nv">$PETSC_ARCH</span><span class="s2">/lib&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>or, for HPCs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export LD_LIBRARY_PATH=</span><span class="nv">$LD_LIBRARY_PATH</span><span class="s2">:</span><span class="nv">$PETSC_DIR</span><span class="s2">/</span><span class="nv">$PETSC_ARCH</span><span class="s2">/lib&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bash_profile
</pre></div>
</div>
</li>
<li><p>Reload the environment with</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>of, for HPCs</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/.bash_profile
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Go inside <code class="docutils literal notranslate"><span class="pre">TOSCA/src</span></code> directory and compile the executables. Make sure to have added the path to custom libraries (i.e. compiled
locally by the user) if any, such as OpenMPI and HDF5, to the <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> as done for the PETSc libraries at step 10.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>tosca
make<span class="w"> </span>tosca2PV
</pre></div>
</div>
</li>
<li><p>Test the installation by copying <code class="docutils literal notranslate"><span class="pre">tosca</span></code> and <code class="docutils literal notranslate"><span class="pre">tosca2PV</span></code> in one of the example cases and run the simulation
and the post-processing with <code class="docutils literal notranslate"><span class="pre">./tosca</span></code> and <code class="docutils literal notranslate"><span class="pre">./tosca2PV</span></code> respectively. To run in parallel you have to use
<code class="docutils literal notranslate"><span class="pre">mpirun</span> <span class="pre">-np</span> <span class="pre">'your-number-of-processors'</span> <span class="pre">./tosca</span></code></p></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you run using <code class="docutils literal notranslate"><span class="pre">mpirun</span> <span class="pre">./tosca</span></code>, MPI will use the maximum number of processors available.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can add <code class="docutils literal notranslate"><span class="pre">tosca</span></code> and <code class="docutils literal notranslate"><span class="pre">tosca2PV</span></code> to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> so that they will be found as executables without the need to copy them inside the case directory.</p>
</div>
<section id="contribute-to-the-tosca-project">
<span id="contribute-subsection"></span><h2>Contribute to the TOSCA Project<a class="headerlink" href="#contribute-to-the-tosca-project" title="Link to this heading"></a></h2>
<p>The TOSCA repository is open-source, so anyone can download and use the code. If you want to contribute to the project by adding
code to TOSCA repository you need to open a pull-request that has to be approved by our team. Note that TOSCA’s master branch
is protected, so you cannot do modifications there. Modifications have to be done in a separate branch which is then merged
into the master branch after approval. In order to do so, please use the following steps:</p>
<ol class="arabic simple">
<li><p>Clone the TOSCA package locally on your machine with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/sebastipa/TOSCA.git</span></code> (we suggest using SSH if you can, this will avoid to insert your username and password every time you push/pull changes).</p></li>
<li><p>Create a new local branch with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">&lt;your-branch-name&gt;</span></code>.</p></li>
<li><p>Make the desired changes to the TOSCA code, then check which files have been modified with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code>.</p></li>
<li><p>Add changes to the git stack with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">&lt;list-of-modified-files&gt;</span></code>.</p></li>
<li><p>Commit the changes using a short but exhaustive comment with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">&quot;your-commit-description&quot;</span></code>.</p></li>
<li><p>Push your local branch online with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">&lt;your-branch-name&gt;</span></code></p></li>
<li><p>Go to github, select your branch, click on <em>Contribute</em> and open a pull-request describing the motivation of your changes, their effect on the code and the tests you performed.</p></li>
<li><p>After approval of the pull-request by our team, commits will be added to the main TOSCA version.</p></li>
<li><p>To stay up-to-date after the modifications have been merged, rebase your local master with the your new commits by first checking out in your local master branch with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span></code> and then rebase with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span> <span class="pre">--rebase</span> <span class="pre">origin</span> <span class="pre">master</span></code>.</p></li>
<li><p>Delete your local branch as it is not useful anymore with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">branch</span> <span class="pre">--delete</span> <span class="pre">-d</span> <span class="pre">your-branch-name</span></code> and use the master until you want to make new changes.</p></li>
</ol>
</section>
<section id="openfast-coupling">
<span id="openfast-section"></span><h2>OpenFAST Coupling<a class="headerlink" href="#openfast-coupling" title="Link to this heading"></a></h2>
<p>TOSCA can be coupled with OpenFAST to perform fluid-structure interaction simulations of wind turbines. OpenFAST coupling can be
activated by setting the <code class="docutils literal notranslate"><span class="pre">USE_OPENFAST</span></code> flag to 1 in the TOSCA makefile. In addition, the user should define the <code class="docutils literal notranslate"><span class="pre">OPENFAST_DIR</span></code> environment variable
to point to the OpenFAST installation directory (this can be set for example in the <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> file).</p>
<p>To compile OpenFAST from source, please follow the instructions on the official <a class="reference external" href="https://openfast.readthedocs.io/en/main/source/install/index.html#compile-from-source">OpenFAST repository</a>.</p>
<p>OpenFAST input files underwent consistent changes during the various releases. TOSCA has been tested with OpenFAST v4.x.x (or later) and the example case
<cite>tests/NREL5MWOpenFastTest</cite> provided in this repository is currently compatible with the latest OpenFAST release. An index of all OpenFAST input files changes in relation
to each OpenFAST releases can be found <a class="reference external" href="https://openfast.readthedocs.io/en/main/source/user/api_change.html">here</a>.</p>
<p>TOSCA’s interface with OpenFAST is flexible, as it allows the user to couple with OpenFAST all, a subset or none of the wind
turbines included in the simulation. Currently, TOSCA only allows to couple the actuator line model with OpenFAST, but the
current implementation can be easily extended to other actuator models (and it is planned for future releases).</p>
<p>Information on how to setup TOSCA-OpenFAST coupled simulations can be found in the <a class="reference internal" href="01_user_guide/input_files/turbines.html#turbines-section"><span class="std std-ref">turbine section</span></a> of the TOSCA User Guide.</p>
</section>
<section id="paraview-catalyst2-os-rendering">
<span id="paraview-catalyst-section"></span><h2>Paraview-Catalyst2 OS-Rendering<a class="headerlink" href="#paraview-catalyst2-os-rendering" title="Link to this heading"></a></h2>
<p>TOSCA provides full interface with Paraview-catalyst2 through the <code class="docutils literal notranslate"><span class="pre">USE_CATALYST</span></code> flag in the makefile. If this is the case, the <code class="docutils literal notranslate"><span class="pre">CATALYST</span></code> environment variable should point to the catalyst2 installation directory. Paraview-catalyst is optional and can be disabled by setting <code class="docutils literal notranslate"><span class="pre">USE_CATALYST=0</span></code></p>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h3>
<p>In order to activate off-screen rendering capabilities, <code class="docutils literal notranslate"><span class="pre">-pvCatalyst=1</span></code> should be set in the <em>control.dat</em> file. A file called <em>catalystProperties</em> will be required inside the sampling directory. Entries to this file are</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ioType</span></code></p></td>
<td><p>can be set to <em>script</em> or <em>general</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">outputType</span></code></p></td>
<td><p>can be set to <em>timeStep</em> or <em>adjustableTime</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">startTime</span></code></p></td>
<td><p>model-time at which catalyst actions start</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">timeInterval</span></code></p></td>
<td><p>acquisition period in seconds if <code class="docutils literal notranslate"><span class="pre">outputType</span></code>
is set to <em>adjustableTime</em> or iterations if
<code class="docutils literal notranslate"><span class="pre">outputType</span></code> is set to <em>timeStep</em></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scriptName</span></code></p></td>
<td><p>name of the catalyst actions python script.
Only required if <code class="docutils literal notranslate"><span class="pre">ioType=script</span></code></p></td>
</tr>
</tbody>
</table>
<p>If ioType=general, 3D fields of velocity magnitude, pressure and q-criterion are saved inside the catalyst/ folder.
If ioType=script, Praview actions defined in the python script are executed and e.g. png images can be saved at runtime.</p>
</section>
<section id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>In order to be installed, Paraview-catalyst2 requires a working C/C++ compiler, Open MPI (version 4.0.x, 4.1.x), Python3 and cmake. In order for Paraview to work, OpenGL must be available at runtime or mesa libraries are required to mimic some hardware components. These are usually available on supercomputers through the ‘mesa’ module, which should be loaded at runtime. Lastly, paraview and catalyst2 should be manually compiled of the system. As Paraview-5.10 contains a bug in the definition of rectilinear mesh (used by TOSCA), Paraview-5.11 or later is recommended.</p>
<p>Prior to install TOSCA, we suggest to create a folder named <code class="docutils literal notranslate"><span class="pre">Software</span></code> inside <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>, where catalyst2 and paraview-5.11 will be located.
In order to re-compile TOSCA with Paraview-catalyst2 capabilities on your system, please follow these steps:</p>
<ol class="arabic simple">
<li><p>Install catalyst2:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">LOCATION</span><span class="o">=</span><span class="nv">$HOME</span>/Software
<span class="nb">cd</span><span class="w"> </span><span class="nv">$LOCATION</span>
mkdir<span class="w"> </span>catalyst2<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>catalyst2
git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.kitware.com/paraview/catalyst.git<span class="w"> </span>catalyst-src<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>catalyst-src
mkdir<span class="w"> </span>-p<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$LOCATION</span>/catalyst2/install
make
make<span class="w"> </span>install
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;export CATALYST=</span><span class="nv">$LOCATION</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span><span class="nv">$HOME</span>/.bashrc
</pre></div>
</div>
<p>Add the Catalyst2 shared libraries to your library path environment variable in your .bashrc with <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">&quot;export</span> <span class="pre">LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$LOCATION/catalyst2/install/lib&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">$HOME/.bashrc</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases you may have to replace <code class="docutils literal notranslate"><span class="pre">lib</span></code> with <code class="docutils literal notranslate"><span class="pre">lib64</span></code></p>
</div>
<ol class="arabic simple" start="2">
<li><p>Install Paraview-5.11:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="nv">$LOCATION</span>
mkdir<span class="w"> </span>paraview-5.11.0<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>paraview-5.11.0
wget<span class="w"> </span>https://www.paraview.org/files/v5.11/ParaView-v5.11.0.tar.xz
tar<span class="w"> </span>-xvf<span class="w"> </span>ParaView-v5.11.0.tar.xz
mv<span class="w"> </span>ParaView-v5.11.0<span class="w"> </span>paraview-src<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>paraview-src
mkdir<span class="w"> </span>-p<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>build
<span class="nb">export</span><span class="w"> </span><span class="nv">CMAKE_PREFIX_PATH</span><span class="o">=</span><span class="nv">$CMAKE_PREFIX_PATH</span>:<span class="nv">$LOCATION</span>/catalyst2/install/lib/cmake/catalyst-2.0
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases you may have to replace lib with lib64</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">FLAGS</span><span class="o">=(</span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$LOCATION</span>/paraview-5.11.0/install<span class="w"> </span>-DVTK_OPENGL_HAS_OSMESA<span class="o">=</span>ON<span class="w"> </span>-DPARAVIEW_USE_MPI<span class="o">=</span>ON<span class="w"> </span>-DBUILD_TESTING<span class="o">=</span>OFF<span class="w"> </span>-DVTK_USE_X<span class="o">=</span>OFF<span class="w"> </span>-DPARAVIEW_USE_QT<span class="o">=</span>OFF<span class="w"> </span>-DPARAVIEW_USE_PYTHON<span class="o">=</span>ON<span class="w"> </span>-DPython3_FIND_STRATEGY<span class="o">=</span>LOCATION<span class="w"> </span>-DPython3_ROOT_DIR<span class="o">=</span><span class="nv">$EBROOTPYTHON</span><span class="w"> </span>-DPARAVIEW_BUILD_SHARED_LIBS<span class="o">=</span>ON<span class="w"> </span>-DPARAVIEW_ENABLE_RAYTRACING<span class="o">=</span>OFF<span class="w"> </span>-DPARAVIEW_ENABLE_CATALYST<span class="o">=</span>ON<span class="w"> </span><span class="o">)</span>
cmake<span class="w"> </span>..<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">FLAGS</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&quot;</span>
make<span class="w"> </span>-j8
make<span class="w"> </span>install
</pre></div>
</div>
<p>Add the Paraview shared libraries to your library path environment variable in your .bashrc with <code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">&quot;export</span> <span class="pre">LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$LOCATION/paraview-5.11.0/install/lib&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">$HOME/.bashrc</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases you may have to replace <code class="docutils literal notranslate"><span class="pre">lib</span></code> with <code class="docutils literal notranslate"><span class="pre">lib64</span></code></p>
</div>
<ol class="arabic" start="3">
<li><p>Re-compile TOSCA</p>
<ul class="simple">
<li><p>Reload the environment with <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">$HOME/.bashrc</span></code></p></li>
<li><p>Go inside <code class="docutils literal notranslate"><span class="pre">TOSCA/src</span></code> directory and recompile the solver with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">tosca</span></code>, ensuring that <code class="docutils literal notranslate"><span class="pre">-DUSE_CATALYST=1</span></code> in the makefile</p></li>
</ul>
</li>
<li><p>Running</p>
<p>In order for catalyst2 to find paraview library, the following envronment variables should be set at runtime:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CATALYST_IMPLEMENTATION_PATHS=$LOCATION/paraview-5.11.0/install/lib/catalyst</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">CATALYST_IMPLEMENTATION_NAME=paraview</span></code></p></li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases you may have to replace <code class="docutils literal notranslate"><span class="pre">lib</span></code> with <code class="docutils literal notranslate"><span class="pre">lib64</span></code></p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome the official documentation of TOSCA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tosca_user_guide.html" class="btn btn-neutral float-right" title="User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Sebastiano Stipa, Arjun Ajay, Joshua Brinkerhoff.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>